实在太常用了！
机器学习、模式识别 几乎哪里都用到了贝叶斯定理
而如果我们仅仅是 把公式（附公式） 记住  
对我们理解它的重要性，没有任何好处。


这图太优秀了
https://theoryandpractice.org/stats-ds-book/bayes_theorem.html


![](../../../assets1/image/贝叶斯的详细讲解-1763457828297.jpeg)






# **一个“攸关性命”的认知陷阱**

假设，你现在是令人尊敬的医生。
你的任务是，根据医学方法检测出的结果，判断你的患者是否患癌，你的决策几乎决定了一个人的性命。


幸运的是，你有一些东西辅助你决策，
首先是医学界过往的,患病率的数据
![](../../../assets/image/贝叶斯的详细讲解-1763950511368.jpeg)

我们发现，过往的数据是这些：
*   **总人口**: 1000 人
*   **真实患病 (Positive)**: 10 人
*   **真实健康 (Negative)**: 990 人

这个数据直观的感受到了，患病率其实不算很多，1%，对吧。

接着，你还有医学界目前有的检测手段，对这1000人的检测情况
![](../../../assets/image/贝叶斯的详细讲解-1763950777332.jpeg)
现在，我们来看检测结果：
*   **TP (真阳性)**: 9 人 (真实患病，且检测为阳性)
*   **FN (假阴性)**: 1 人 (真实患病，但检测为阴性)
*   **FP (假阳性)**: 89 人 (真实健康，但检测为阳性)
*   **TN (真阴性)**: 901 人 (真实健康，且检测为阴性)


这里重申一下名词，真/假 指的是检测结果的对错，阳/阴指的是检测的结果，（  阳指的是患病，阴指的是健康）
即，真阳指的是“真的患病”  假阳指的是“假的患病，即检测出是患病（阳），但实际不对。他是健康的。”



现在我们来计算几个指标：

*   **Sensitivity (敏感度)**: 也叫**召回率 (Recall)** 或 **真正例率 (TPR)**！
    *   **公式**: $TPR = TP / (TP + FN) = 9 / (9+1) = 9/10 = 90\%$
    *   **含义**: 在**所有真正患病的人中**，检测方法能成功**找出**多少。

*   **Specificity (特异度)**: 这是 **真负例率 (TNR)**。
    *   **公式**: $TNR = TN / (TN + FP) = 901 / (901+89) = 901 / 990 \approx 91\%$
    *   **含义**: 在**所有真正健康的人中**，检测方法能成功**排除**多少。



好，现在回到我们的任务。
我们任务，判断病人是否患病，可以转化为，
“如果知道一个人检测出来是阳性，他有多大概率，真的患病？”

而根据刚才的俩个指标，都高达90%，有没有觉得，凭借直觉，一个人检测出阳性，他大概率也90%概率患病？

啊哦！ 你刚很大概率，让一个正常人悲痛欲绝....

为什么？

我们现在不靠直觉，计算一下：

求的是，检测出阳性的人，真实患病的概率
P(患病|阳性)  =  9/89+9    
其实是很小的数字！真实概率只有惊人的9%

意外吗！其实当我们拿着10个人的阳性检测报告时，其中只有1个人是真的患病，我们很容易误判！

这里很自然地引起了我们的困惑：

1. 为什么我们的直觉在这里会彻底失效？
2. 我们应该如何建立一个可靠的思维框架来纠正这种偏误？
3. 这个框架如何从一个简单的概率问题，延伸成为现代人工智能的基石？

#  **重建直觉**

## 为什么刚才的直觉会失效？
![](../../../assets/image/贝叶斯的详细讲解-1763950777332.jpeg)

![](../../../assets/image/贝叶斯的详细讲解-1763952581713.jpeg)

实际上，我们需要的数据，“所有阳性的人，其真实患病的占比多少” 
其样本空间，是所有阳性的人   。
我们只关心“绿色框框“。
“在所有绿色框框的人当中，来自‘真病人’区域的比例是多少？” 答案是 9 / (9 + 89)

而 召回率，样本空间是所有患病的人，  
特异度， 样本空间是所有健康的人，  

好像.... 本来就毫无关联。

只是我们从心理上，感觉，   患病的人都容易检测出阳   健康的人也容易检测出健康  这俩个数据听起来非常棒

那个“棒”的感觉 ， 也带到了  准确率 --- 那是不是阳的人 都差不多能检测出患病？

然而，
患病的人容易检测出阳 我们是 10个患病人 9个检测出  得到的
健康的人也容易检测出阴  我们是 990个健康人   901个检测出 得到的

而我们精确率  真正的关注了所有阳的人    9 个真阳人    89个假阳人  这样一对比就很显然了，怎么所有阳的人中，就9个是真的患病！

其实带给我们震撼的，是对比中的 89个假阳  在健康人群中 901个阴 89个阳 这个89显得微不足道
但现在 我们把视角变为所有阳人时 这89显得很大了
这是基数 与比例 的问题

即使召回率再高  高到100% 最多也是检测出10个人
误诊率再低 健康的人基数大 比如低到1% 那也是会误诊出10个人

我们会发现 这么高的召回率这么低的误诊率  精确率最终才50%！

所有，也可以说，是基数，误导了我们。


## 如何更好的思考

看来，我们的数据，可能有很多，我们可以自己组合出”精确率、敏感度、特异度....“
但到底如何用他们，才能尽可能有效的帮助我们决策，而不是产生像刚才那样的”基数谬误“。

我们直接给大家展示，最有效的思考路径--**信念更新**  （那是怎么来的呢....???我也不知道）

在没有任何证据之前，你对”真凶“的信念有多强？
在我们的例子里，这就是人群的患病率 P(患病)，非常低（1%）。我们可以将其表示为**赔率 (Odds)**：患病 vs 健康的赔率是1:99。

现在，你发现了一个证据——“阳性检测结果”。

这个证据本身有多强的说服力？它在多大程度上支持“患病”这个假设，而不是“健康”这个假设？

我们可以如此计算：

P(阳性|患病) / P(阳性|健康) = 敏感度 / 假阳性率 = 90% / 9% = 10。

即，“阳性”这个信号，在病人身上出现的可能性，是在健康人身上出现可能性的 **10倍**。它是一个强度为10的、指向“患病”的证据。


现在更新你的信念。我们用证据的力量去乘以你最初的信念赔率。
	
- **后验赔率 = 似然比 × 先验赔率**
	
- Posterior Odds = 10 × (1 / 99) = 10 / 99
	
- **转换回概率：** 赔率是10:99，意味着在109次可能性中，有10次是患病的。所以概率是 10 / (10 + 99) ≈ 9.1%。

惊人！居然结果，与我们刚才”全知全能“视角的计算结果，一模一样（为啥呢，感觉这里也要解释）
