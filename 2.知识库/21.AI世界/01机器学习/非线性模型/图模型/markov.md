![](../../../../../assets/image/markov-1764161825935.jpeg)

在无向图 只用看线路有没有被已观测节点堵住  
额 有向图只要有箭头的 稍微复杂点 都不太能用无向图表述吧。 但只是直觉，我细细想一下， 无向图不能表述因果，只能表示有联系，

**严厉剖析：**
1.  **回顾 V型结构 ($A \rightarrow C \leftarrow B$)**：
    *   特点：**两头通，中间堵**。
    *   性质：平时 $A, B$ 独立；**观测 $C$ 后， $A, B$ 变得相关**（解释得通）。

2.  **无向图能做到吗？ ($A - C - B$)**：
    *   如果你观测 $C$：根据刚才的“路障规则”，路径被堵死，$A, B$ **独立**。
    *   **矛盾出现了！**
        *   有向图 V型：观测 $C \rightarrow$ 相关。
        *   无向图 链式：观测 $C \rightarrow$ 独立。
    *   **行为完全相反！**

**结论**：
无向图**永远无法**表达“两个变量平时独立，观测到共同结果后变得相关”这种逻辑。它的一生都被“观测即阻断”这个简单的规则锁死了。这就是它最大的局限。

团：
找图中节点，如果每个节点都有向外连接每一个其他节点的边，这些节点就构成了团。显然很好理解，他们都互相连接，像一群团体。 

x1--x4就不是团了 x1和x4没有互相连接。所以最大团是，图里，能称为团的，且拥有最多的节点个数
**错！这是数学定义上的常见误区。**

- **Maximum Clique (最大团)**：全图中节点数最多的那个团。（这是你理解的意思）。
    
- **Maximal Clique (极大团)**：**PPT P35/42 指的是这个**。它的意思是：**“在这个团的基础上，你再也不能往里多加任何一个相邻节点了，否则它就不是团了。”**
图中有两个独立的结构：左边是一个三角形 $\{1, 2, 3\}$，右边是一条线 $\{4, 5\}$。
*   $\{1, 2, 3\}$ 是一个极大团（再加进不去了）。
*   $\{4, 5\}$ 也是一个极大团（再加进不去了）。
*   虽然 $\{4, 5\}$ 只有2个节点，比左边少，但它依然是**极大团**。

**结论**：MRF 的公式要求我们在**每一个**极大团上定义势函数，而不是只在那个最大的团上定义。

势函数 (Potential Function, ψ)
我是真不懂， 没有势函数的来龙去脉... 直觉我都没建立起
**来龙去脉：**
在贝叶斯网络中，有箭头，所以我们可以定义**“局部归一化的概率”** $P(B|A)$ —— 无论 A 是什么，B 的概率加起来总是 1。这就像“接力棒”，一棒传一棒，总能量守恒。

在马尔可夫随机场（无向图）中，没有箭头，只有连线。$A$ 和 $B$ 是平等的。
我们不能说 $P(A|B)$，也不能说 $P(B|A)$。
我们只能说：**$A$ 和 $B$ “合得来”的程度是多少？**

**直觉建立：势函数 = “默契分” (Compatibility Score)**

想象 $A$ 和 $B$ 是图上的两个邻居（比如图像上的两个相邻像素）。
*   **状态**：它们都可以取值 0 (黑) 或 1 (白)。
*   **势函数 $\psi(A, B)$** 就是一张**打分表**：
    *   如果 $A=0, B=0$（颜色一样）：默契分 = 10 分。
    *   如果 $A=1, B=1$（颜色一样）：默契分 = 10 分。
    *   如果 $A=0, B=1$（颜色不同）：默契分 = 1 分（不默契，给低分）。

**关键点：**
1.  **势函数 $\psi$ 不是概率！** 它可以大于 1（比如 10 分）。它只是一个**正数**，代表“我们有多希望看到这个局部状态组合”。
2.  **乘积规则**：整个图（所有变量）的“总得分”，就是所有局部“默契分”的**乘积**。
    $$Score(x) = \prod_{C} \psi_C(x_C)$$

---

### **3. 为什么要归一化 ($Z$)？**

既然势函数只是“分数”，乘出来的结果可能是 10000，也可能是 0.05。
但这必须是一个**概率分布**，概率的总和必须是 **1**。

所以，必须有一个**配分函数 (Partition Function) $Z$**：
$$Z = \sum_{x} \prod_{C} \psi_C(x_C)$$
**$Z$ 就是“所有可能状态的总得分之和”。**

$$P(x) = \frac{\text{当前状态的得分}}{\text{所有可能状态的总得分}(Z)}$$

**这就是无向图的代价**：
*   有向图（贝叶斯）：局部自带归一化 ($P(B|A)$)，乘起来直接就是概率。不需要算 $Z$。
*   无向图（MRF）：局部只是分数，乘起来还得除以一个巨大的 $Z$ 才能变回概率。**算这个 $Z$ 通常是很难的。**