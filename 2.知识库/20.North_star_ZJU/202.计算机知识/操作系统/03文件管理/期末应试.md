什么是文件 构成，存取方式。文件目录 目录文件。目录结构 检索方式，操作文件 创建打开写读关删复制
机械系盘 结构 原理 时间，寻道 旋转延迟 数据传输（时间短）
磁盘调度算法
文件系统可靠性 持久性 一致性


# 定义
- 记录在外存的：磁带、磁盘等... 额，反正就是，不在内存嘛，内存？内存是那些ram芯片吧，是的，内存也可以叫主存，是CPU直接访问的地方.
- 具有符号名的：额，什么叫符号名？    就是**文件名**（比如 homework.doc）。
- 在逻辑上具有完整意义的一组相关信息项的集合：  相反的， 像进程被分页法切分的碎片，应该就是 逻辑上没完整意义的吧 

# 组成
由目录和文件体（数据实体？）组成。

- 逻辑结构：<span style="background:rgba(240, 200, 0, 0.2)">文件在用户眼里的样子</span>    “无结构的流式文件”是啥，不知道啥意思。 **重点！现代OS（Unix/Linux/Windows）全是这个 ！ 就是一长串字符流 系统根本不知道里面是图片还是代码，系统只看到 01010101... 排成一条长龙**                    **有结构文件 (记录式文件 - Record File)** —— **老古董/数据库专用**
- 物理结构：以磁盘举例，那就是磁盘的物理块呗 。分为连续存储、链接结构存储（链表的样子）、索引结构存储（像页表）

# 文件的存取方式
顺序存取：对文件中的信息按顺序依次读写     什么是文件中的信息？
随机读取：
- 直接存取：随意存取文件中任意一个物理记录   什么是物理记录？
- 按键存取：根据文件中各记录的某个数据项内容来存取记录   什么是数据项内容？
这里有点迷糊啊
按道理不都是按顺序存取吗？无论在外存是何种方式存储的，连续、索引、串联，不都是按顺序吗？

# 目录

文件，
无论它是文本、exe、还是文件夹，在操作系统眼里都只有两部分组成：

1. **FCB (File Control Block)**：**文件控制块**。这是文件的**“身份证”**（元数据）。
    
2. **文件体 (File Body)**：**数据实体**。这是文件的**“肉身”**（实际内容）


FCB，是找到文件体的关键。
他们一般在”目录“这个东西里，
联系实际  ”目录“也是个文件   其实就是文件夹 ？   文件夹这个文件，点进去后，会发现我们一堆文件或文件夹   怎么解释的？怎么与现实对应
那一级目录结构、二级、多级都指什么？

FCB 指向 文件体。通过 FCB 才能找到文件体在硬盘的哪个位置。
- **基本信息**：文件大小、创建者、创建时间。
- **存取控制**：读写权限（rwx）。
- **使用信息**：指针！指向文件数据在硬盘上的位置（比如：起始块号100，长度5）。


FCB 现在理解成俩部分，
先是文件名+inode  一个是去inode里的地址，可以发现上面存储着的文件信息

- **Q: 先是文件名+inode？**
    
    - A: 对，这是在**目录文件的数据**里存着的。
        
- **Q: 一个是去inode里的地址？**
    
    - A: 对，拿到 Inode号后，去**Inode表**（通常在磁盘开头的特定区域）里找。
        
- **Q: 发现上面存储着文件信息？**
    
    - A: 对，Inode 结构体里存了除了文件名以外的所有 FCB 信息。


如果是 **Inode 系统**，如果你想查看一个文件的**大小**，你需要访问硬盘几次？  
答案通常是：**读取目录块（拿到Inode号） -> 读取Inode块（拿到属性）**。至少两次。





1. **古代阶段（FAT/DOS）**：**目录项 = FCB**。
    
    - 目录文件里的一行（目录项），就直接记全了文件名、大小、权限、物理地址。
        
    - 所以 PPT 说“目录项就是 FCB”。
        
2. **现代阶段（Unix/Linux）**：**目录项 ≠ FCB**。
    
    - 为了搜索快，把 FCB 拆了。
        
    - **目录项**只保留：文件名 + Inode号。
        
    - **FCB 的本体**（大小、权限、物理地址）：搬家到了 **Inode 区**。
        

**关键对齐**：为了应试，如果题目没特别强调 Unix/Inode，你就按 PPT 的定义背：**“目录是由目录项组成的，目录项就是 FCB”**。但如果考到了 Inode 计算题，立刻切换到现代思维。
![](../../../../../assets/image/期末应试-1764558547372.jpeg)



## 目录检索
用户给出文件名，按名寻找目录项
根据路径名检索： 
• 全路径名：从根开始
• 相对路径：从当前目录开始

在检索时（即按名寻找目录项时）的算法：
哈希表算法、线性检索法

![](../../../../../assets/image/期末应试-1764559206072.jpeg)
# 对文件的操作
- 读文件：找目录（就是刚才一连串 文件路径：文件名找inode 进入inode看内容 到实际物理块..）  最终得到目标文件，在外存的地址，然后从外存将数据读入内存
- 写文件：查找目录，找到目录项，（啥是目录项，就是FCB呗 又乱了 到底此时是不是unix的inode），利用目录中的文件指针将信息写入文件  
