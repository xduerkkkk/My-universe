## 总线概述
- 早期总线：只是一个并线总线（同一时刻只允许一个设备发送信息，但可以多个设备同时接收数据），并且只连接的硬件
- 现代总线：除了过去的并行总线，还多了串行总线，连接硬件软件
## 总线分类 （所处位分类）


- 片内总线：连接芯片内部的硬件，如 cpu 里寄存器之间，寄存器与运算器之间
- 系统总线：连接大的硬件，如 cpu 和主存
- I/O 总线：连接计算机内部，分离低速设备和高速设备统一管理外设与 cpu 的通信
- 外部总线：比如把鼠标连到电脑上，是连接计算机与外部设备 

## 总线功能
- 数据总线：传送数据的，这个数据是二进制数，通常与机器字长相等（毕竟不可能多于机器字长，人家 cpu 只能一次处理那么多，咱就不多不少就好）不过技术现在变好，也会更牛
- 地址总线：记录数据总线中数据目的地的地址。如果有 32 位，那就有 2 的 32 次方地址可寻
- 控制总线：协调各个设备，控制信号流动，*提供时序信号、控制信号、响应信号*
## 总线复用技术
- 专用信号线：只有一个功能，传输一种信号
- 复用总线：可以分时传输不同信号
##  总线设备分类
主设备发送信号，信号的目的地就叫从设备，它会被寻址访问。
## 三态门
设备通过三态门与总线连接
- 控制总线的输出，起到隔离、放大等作用
- 控制总线运输的方向（单向或双向，使用三态门设计电路即可实现）
## 总线性能指标
- 总线宽度：数据总线的根数，一个时钟周期通常一根传送 1 个数字.比如 8 位就是 8 根总线
- 总线时钟频率：时钟周期倒数
- 总线传输次数：一个时钟周期一般传输 1，特殊结构除外
- 总线实际工作频率：时钟频率×**传输次数
- 总线带宽：实际工作频率再×总线宽度，表示出了传输速率
- 总线负载能力：总线上能同时连接的设备
## 总线传输机制 
1. 请求与仲裁：主设备向总线发送请求，不过请求太多了总线会先思考 (仲裁) ，第一个处理的请求是谁，其余排队等候。请求获批后，设备才可以使用总线 
2. 寻址：总线寻找主设备所需要的从设备的地址，然后给从设备打招呼。此时主设备与从设备互相清楚对方的地址了
3. 传输：地址已经明了，想从主设备传数据给从设备，或主设备在从设备拿数据都 ok。但一次只能处理一个机器字长的数据，毕竟数据总线就是这么设计的
4. 结束：主设备撤销请求，总线让给下一个有需求的设备
## 总线事务
一次主从设备的信息交换就是一次事务
特殊：突发传送事务，实际上就是这个主设备不是寻一次地址，而是寻多个从设备或一个从设备的多个地址，总线一口气处理它所有的请求和数据的传输。不过时钟周期不变，该多久一个数据传输还是多久，只不过是连续地处理完所有工作而已
## 总线信息传送
### 并行传送
所有信息，每根线（每一位）同时传输，一次传输一个机器字长。
优点：传送速度快
缺点：若空间太长，传送容易畸形。故而仅适用于近距离传送
### 串行传送
按顺序，一位一位地传送。
优点：质量有保障
缺点：效率低
- 传送方向：单工，半双工、全双工
- 定时方式：
   - 同步通信：大家的采样频率都一样，发送数据时之间一串数据当作一个 信息帧 
   - 异步通信：大家都有各自的时钟，所有一个信息帧只发送一个字符，中间加点“起”，“停”信号从而最后信息同步

## 总线仲裁
### 集中式仲裁 ：
中央集权，做决定（总线让谁用）这个过程，只交给一个地方处理（cpu，或单独的总线控制器）
-  链式查询：分为 BR BG BB  信号谁离得近谁先发送 BR 信号    BG 信号需要一个时钟周期
- 计数器定时查询：假如一共有8个设备，计算机系统里会放置3条线，每条线都能代表0或1。每个时钟周期都会逐个地址访问，如001 010 011...恰好发现他有请求了就去处理 但还要有个br线和bs线，bs不必多说。br线是告诉总线，有人要帮忙，开始轮询吧。br线并不能直接告诉总线谁要帮忙，但通过轮询可以确定是谁发出的求救信号。故而log2n＋2
- 独立请求方式：每个主设备都有专门的 BRBG 专线  外加一条统一的bb线
### 分布式仲裁
每个主设备都有自己的仲裁号和仲裁器


# 习题心得
所有种类的总线都分为地址线、数据线和控制线吗
系统总线并不是全由 cpu 控制管理
计数器定时查询方式下，若每次计数都从上次得到响应的设备随后一个设备号开始，则每个设备的优先级均等
PCI 总线是一个与处理器时钟频率无关的高速外部总线，PCI 在哪里用到？
总线忙信号的建立者是获得总线控制权的设备，而不是总线！对于设备来说，顺手的事嘛。好比进门诊把门带上
根据数据传输方向的不同，可以分为单工、半双工和全双工3种方式，不存在半单工方式。