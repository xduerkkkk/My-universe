


1. **交接**：内核中的**IP模块**，将封装好的“IP数据报”和“下一跳IP地址”，递交给了**网卡驱动程序**（数据链路层）。
    
2. **问路 (如果需要)**：**网卡驱动程序**发现缓存中没有下一跳IP对应的MAC地址。它遵循**ARP协议**，构建了一个ARP请求帧，并通过物理网卡，发送给了**交换机**。
    
3. **传递与响应**：**交换机**负责将ARP请求和响应，在局域网内进行转发。
    
4. **最终封装**：**网卡驱动程序**成功获取到下一跳的MAC地址后，它遵循**以太网协议**，将“IP数据报”封装成一个完整的“以太网帧”。
    
5. **发送**：**网卡驱动程序**将这个以太网帧，交给物理网卡芯片，由芯片将其转换为电信号，再次通过**交换机**，发送往**路由器**。